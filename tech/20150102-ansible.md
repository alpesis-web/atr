Jan 02 2014 | ansible | Kelly Chan
# Ansible

## modules, inventories and variables

- inventory: hosts

<pre>
ansible-playbook -c paramiko -i step-00/hosts step-00/setup.yml --ask-pass --sudo

ansible -m ping all -i step-01/hosts

＃ display machine info with shell script
ansible -i step-02/hosts -m shell -a 'uname -a' host0.example.org

＃ copy a file
ansible -i step-02/hosts -m copy -a 'src=/etc/motd dest=/tmp/' host0.example.org

＃ check the version of linux for all hosts
ansible -i step-02/hosts -m shell -a 'grep DISTRIB_RELEASE /etc/lsb-release' all 

＃ check more facts
ansible -i step-02/hosts -m setup host0.example.org

＃ check the memories
ansible -i step-02/hosts -m setup -a 'filter=ansible_memtotal_mb' all
</pre>

## playbooks

- playbook: task

<pre>
ansible-playbook -i step-04/hosts -l host1.example.org step-04/apache.yml
</pre>

- `step-04/hosts`: inventory
- `host1.example.org`: host
- `step-04/apache.yml`: playbook

<pre>
ansible-playbook -i step-04/hosts -l host1.example.org step-04/apache.yml
</pre>
